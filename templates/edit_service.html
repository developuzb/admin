{% extends "base.html" %}
{% block title %}Xizmatni tahrirlash{% endblock %}
{% block content %}

<div class="max-w-2xl mx-auto mt-10 bg-white p-6 rounded-2xl shadow-md">
    <h2 class="text-2xl font-semibold mb-6 text-gray-800">‚úèÔ∏è Xizmatni tahrirlash</h2>

    <form action="/admin/services/edit/{{ service.id }}" method="post" enctype="multipart/form-data" class="space-y-5">

        <div>
            <label class="block text-sm font-medium text-gray-700">Xizmat nomi:</label>
            <input type="text" name="name" value="{{ service.name }}" required class="w-full border rounded px-4 py-2">
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700">Tavsif:</label>
            <textarea name="description" rows="3" required
                class="w-full border rounded px-4 py-2">{{ service.description }}</textarea>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
                <label class="block text-sm font-medium text-gray-700">Narxi:</label>
                <input type="number" name="price" value="{{ service.price }}" required
                    class="w-full border rounded px-4 py-2">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">Asl narxi (cost_price):</label>
                <input type="number" name="cost_price" value="{{ service.cost_price }}" required
                    class="w-full border rounded px-4 py-2">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">Chegirma oldi narxi (original_price):</label>
                <input type="number" name="original_price" value="{{ service.original_price }}" required
                    class="w-full border rounded px-4 py-2">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">Cashback (%):</label>
                <input type="number" name="cashback" value="{{ service.cashback }}" required min="0" max="100"
                    class="w-full border rounded px-4 py-2">
            </div>
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700">To‚Äòlov turlari:</label>
            <input type="text" name="payment_options" value="{{ service.payment_options }}" required
                class="w-full border rounded px-4 py-2">
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700">Rasm yuklash (majburiy):</label>
            <input type="file" name="image" accept="image/*" required
                class="w-full border rounded px-4 py-2 file:bg-blue-50 file:text-blue-700 file:border-0 file:py-2 file:px-4 file:rounded-md hover:file:bg-blue-100">
        </div>

        {% if service.image %}
        <div>
            <label class="block text-sm font-medium text-gray-600">Joriy rasm:</label>
            <img src="/static/images/{{ service.image }}" alt="Xizmat rasmi" class="h-32 mt-2 rounded shadow">
        </div>
        {% endif %}

        <div class="pt-4">
            <button type="submit" class="bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700 transition">
                üíæ Yangilash
            </button>
        </div>

    </form>

    <form method="post" action="/admin/services/{{ service.id }}/toggle"
        onsubmit="return confirm('Statusni o‚Äòzgartirishni istaysizmi?')">
        <button type="submit"
            class="mt-4 bg-yellow-500 hover:bg-yellow-600 text-white text-sm font-medium px-4 py-2 rounded-lg shadow">
            üîÅ Holatni o‚Äòzgartirish
        </button>
    </form>


</div>

{% endblock %}